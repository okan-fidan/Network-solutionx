{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"../config/firebase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":131},"end":{"line":3,"column":42,"index":173}}],"key":"K/SZPG5sPeV1upVh8dao26aG7MQ=","exportNames":["*"],"imports":1}},{"name":"firebase/auth","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":174},"end":{"line":10,"column":23,"index":332}}],"key":"o2UvaebosmgxImAY7KlhPO3FnYs=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":11,"column":0,"index":333},"end":{"line":11,"column":47,"index":380}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}},{"name":"../services/notifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":12,"column":0,"index":381},"end":{"line":17,"column":35,"index":558}}],"key":"PilFUkBfYpg1cVGLNRiWDw/oULQ=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/contexts/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[1], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  var _configFirebase = require(_dependencyMap[2], \"../config/firebase\");\n  var _firebaseAuth = require(_dependencyMap[3], \"firebase/auth\");\n  var _servicesApi = require(_dependencyMap[4], \"../services/api\");\n  var api = _interopDefault(_servicesApi);\n  var _servicesNotifications = require(_dependencyMap[5], \"../services/notifications\");\n  var _reactJsxDevRuntime = require(_dependencyMap[6], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [userProfile, setUserProfile] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      const unsubscribe = (0, _firebaseAuth.onAuthStateChanged)(_configFirebase.auth, async firebaseUser => {\n        setUser(firebaseUser);\n        if (firebaseUser) {\n          try {\n            const response = await api.default.get('/api/user/profile');\n            setUserProfile(response.data);\n\n            // Push notification kaydı (sadece mobil cihazlarda)\n            if (Platform.default.OS !== 'web') {\n              try {\n                const pushToken = await (0, _servicesNotifications.registerForPushNotificationsAsync)();\n                if (pushToken) {\n                  await (0, _servicesNotifications.savePushToken)(pushToken);\n                }\n              } catch (pushError) {\n                // Push notification hatası uygulamayı durdurmamalı\n                console.log('Push notification setup skipped');\n              }\n            }\n          } catch (error) {\n            // 404 = yeni kullanıcı, kayıt gerekiyor\n            if (error?.response?.status === 404) {\n              setUserProfile({\n                needsRegistration: true\n              });\n            } else {\n              console.log('Profile fetch error (may be new user)');\n            }\n          }\n        } else {\n          setUserProfile(null);\n        }\n        setLoading(false);\n      });\n\n      // Notification listener'ları (sadece mobil cihazlarda)\n      let notificationListener;\n      let responseListener;\n      if (Platform.default.OS !== 'web') {\n        notificationListener = (0, _servicesNotifications.addNotificationReceivedListener)(notification => {\n          console.log('Bildirim alındı:', notification);\n        });\n        responseListener = (0, _servicesNotifications.addNotificationResponseReceivedListener)(response => {\n          console.log('Bildirime tıklandı:', response);\n          // Burada bildirime tıklandığında yapılacak işlemler\n          // Örn: ilgili sohbete yönlendirme\n        });\n      }\n      return () => {\n        unsubscribe();\n        if (notificationListener) notificationListener.remove();\n        if (responseListener) responseListener.remove();\n      };\n    }, []);\n    const signIn = async (email, password) => {\n      await (0, _firebaseAuth.signInWithEmailAndPassword)(_configFirebase.auth, email, password);\n    };\n    const signUp = async (email, password) => {\n      await (0, _firebaseAuth.createUserWithEmailAndPassword)(_configFirebase.auth, email, password);\n    };\n    const signOut = async () => {\n      await (0, _firebaseAuth.signOut)(_configFirebase.auth);\n      setUserProfile(null);\n    };\n    const registerProfile = async data => {\n      const response = await api.default.post('/api/user/register', data);\n      setUserProfile(response.data);\n    };\n    const refreshProfile = async () => {\n      if (user) {\n        const response = await api.default.get('/api/user/profile');\n        setUserProfile(response.data);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        userProfile,\n        loading,\n        signIn,\n        signUp,\n        signOut,\n        registerProfile,\n        refreshProfile\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 5\n    }, this);\n  }\n  function useAuth() {\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n});","lineCount":131,"map":[[13,2,46,0,"exports"],[13,9,46,0],[13,10,46,0,"AuthProvider"],[13,22,46,0],[13,25,46,0,"AuthProvider"],[13,37,46,0],[14,2,149,0,"exports"],[14,9,149,0],[14,10,149,0,"useAuth"],[14,17,149,0],[14,20,149,0,"useAuth"],[14,27,149,0],[15,2,1,0],[15,6,1,0,"_react"],[15,12,1,0],[15,15,1,0,"require"],[15,22,1,0],[15,23,1,0,"_dependencyMap"],[15,37,1,0],[16,2,1,89],[16,6,1,89,"_reactNativeWebDistExportsPlatform"],[16,40,1,89],[16,43,1,89,"require"],[16,50,1,89],[16,51,1,89,"_dependencyMap"],[16,65,1,89],[17,2,1,89],[17,6,1,89,"Platform"],[17,14,1,89],[17,17,1,89,"_interopDefault"],[17,32,1,89],[17,33,1,89,"_reactNativeWebDistExportsPlatform"],[17,67,1,89],[18,2,3,0],[18,6,3,0,"_configFirebase"],[18,21,3,0],[18,24,3,0,"require"],[18,31,3,0],[18,32,3,0,"_dependencyMap"],[18,46,3,0],[19,2,4,0],[19,6,4,0,"_firebaseAuth"],[19,19,4,0],[19,22,4,0,"require"],[19,29,4,0],[19,30,4,0,"_dependencyMap"],[19,44,4,0],[20,2,11,0],[20,6,11,0,"_servicesApi"],[20,18,11,0],[20,21,11,0,"require"],[20,28,11,0],[20,29,11,0,"_dependencyMap"],[20,43,11,0],[21,2,11,0],[21,6,11,0,"api"],[21,9,11,0],[21,12,11,0,"_interopDefault"],[21,27,11,0],[21,28,11,0,"_servicesApi"],[21,40,11,0],[22,2,12,0],[22,6,12,0,"_servicesNotifications"],[22,28,12,0],[22,31,12,0,"require"],[22,38,12,0],[22,39,12,0,"_dependencyMap"],[22,53,12,0],[23,2,17,35],[23,6,17,35,"_reactJsxDevRuntime"],[23,25,17,35],[23,28,17,35,"require"],[23,35,17,35],[23,36,17,35,"_dependencyMap"],[23,50,17,35],[24,2,44,0],[24,8,44,6,"AuthContext"],[24,19,44,17],[24,35,44,20],[24,39,44,20,"createContext"],[24,45,44,33],[24,46,44,33,"createContext"],[24,59,44,33],[24,61,44,63,"undefined"],[24,70,44,72],[24,71,44,73],[25,2,46,7],[25,11,46,16,"AuthProvider"],[25,23,46,28,"AuthProvider"],[25,24,46,29],[26,4,46,31,"children"],[27,2,46,65],[27,3,46,66],[27,5,46,68],[28,4,47,2],[28,10,47,8],[28,11,47,9,"user"],[28,15,47,13],[28,17,47,15,"setUser"],[28,24,47,22],[28,25,47,23],[28,28,47,26],[28,32,47,26,"useState"],[28,38,47,34],[28,39,47,34,"useState"],[28,47,47,34],[28,49,47,48],[28,53,47,52],[28,54,47,53],[29,4,48,2],[29,10,48,8],[29,11,48,9,"userProfile"],[29,22,48,20],[29,24,48,22,"setUserProfile"],[29,38,48,36],[29,39,48,37],[29,42,48,40],[29,46,48,40,"useState"],[29,52,48,48],[29,53,48,48,"useState"],[29,61,48,48],[29,63,48,69],[29,67,48,73],[29,68,48,74],[30,4,49,2],[30,10,49,8],[30,11,49,9,"loading"],[30,18,49,16],[30,20,49,18,"setLoading"],[30,30,49,28],[30,31,49,29],[30,34,49,32],[30,38,49,32,"useState"],[30,44,49,40],[30,45,49,40,"useState"],[30,53,49,40],[30,55,49,41],[30,59,49,45],[30,60,49,46],[31,4,51,2],[31,8,51,2,"useEffect"],[31,14,51,11],[31,15,51,11,"useEffect"],[31,24,51,11],[31,26,51,12],[31,32,51,18],[32,6,52,4],[32,12,52,10,"unsubscribe"],[32,23,52,21],[32,26,52,24],[32,30,52,24,"onAuthStateChanged"],[32,43,52,42],[32,44,52,42,"onAuthStateChanged"],[32,62,52,42],[32,64,52,43,"auth"],[32,79,52,47],[32,80,52,47,"auth"],[32,84,52,47],[32,86,52,49],[32,92,52,56,"firebaseUser"],[32,104,52,68],[32,108,52,73],[33,8,53,6,"setUser"],[33,15,53,13],[33,16,53,14,"firebaseUser"],[33,28,53,26],[33,29,53,27],[34,8,54,6],[34,12,54,10,"firebaseUser"],[34,24,54,22],[34,26,54,24],[35,10,55,8],[35,14,55,12],[36,12,56,10],[36,18,56,16,"response"],[36,26,56,24],[36,29,56,27],[36,35,56,33,"api"],[36,38,56,36],[36,39,56,36,"default"],[36,46,56,36],[36,47,56,37,"get"],[36,50,56,40],[36,51,56,41],[36,70,56,60],[36,71,56,61],[37,12,57,10,"setUserProfile"],[37,26,57,24],[37,27,57,25,"response"],[37,35,57,33],[37,36,57,34,"data"],[37,40,57,38],[37,41,57,39],[39,12,59,10],[40,12,60,10],[40,16,60,14,"Platform"],[40,24,60,22],[40,25,60,22,"default"],[40,32,60,22],[40,33,60,23,"OS"],[40,35,60,25],[40,40,60,30],[40,45,60,35],[40,47,60,37],[41,14,61,12],[41,18,61,16],[42,16,62,14],[42,22,62,20,"pushToken"],[42,31,62,29],[42,34,62,32],[42,40,62,38],[42,44,62,38,"registerForPushNotificationsAsync"],[42,66,62,71],[42,67,62,71,"registerForPushNotificationsAsync"],[42,100,62,71],[42,102,62,72],[42,103,62,73],[43,16,63,14],[43,20,63,18,"pushToken"],[43,29,63,27],[43,31,63,29],[44,18,64,16],[44,24,64,22],[44,28,64,22,"savePushToken"],[44,50,64,35],[44,51,64,35,"savePushToken"],[44,64,64,35],[44,66,64,36,"pushToken"],[44,75,64,45],[44,76,64,46],[45,16,65,14],[46,14,66,12],[46,15,66,13],[46,16,66,14],[46,23,66,21,"pushError"],[46,32,66,30],[46,34,66,32],[47,16,67,14],[48,16,68,14,"console"],[48,23,68,21],[48,24,68,22,"log"],[48,27,68,25],[48,28,68,26],[48,61,68,59],[48,62,68,60],[49,14,69,12],[50,12,70,10],[51,10,71,8],[51,11,71,9],[51,12,71,10],[51,19,71,17,"error"],[51,24,71,27],[51,26,71,29],[52,12,72,10],[53,12,73,10],[53,16,73,14,"error"],[53,21,73,19],[53,23,73,21,"response"],[53,31,73,29],[53,33,73,31,"status"],[53,39,73,37],[53,44,73,42],[53,47,73,45],[53,49,73,47],[54,14,74,12,"setUserProfile"],[54,28,74,26],[54,29,74,27],[55,16,74,29,"needsRegistration"],[55,33,74,46],[55,35,74,48],[56,14,74,53],[56,15,74,61],[56,16,74,62],[57,12,75,10],[57,13,75,11],[57,19,75,17],[58,14,76,12,"console"],[58,21,76,19],[58,22,76,20,"log"],[58,25,76,23],[58,26,76,24],[58,65,76,63],[58,66,76,64],[59,12,77,10],[60,10,78,8],[61,8,79,6],[61,9,79,7],[61,15,79,13],[62,10,80,8,"setUserProfile"],[62,24,80,22],[62,25,80,23],[62,29,80,27],[62,30,80,28],[63,8,81,6],[64,8,82,6,"setLoading"],[64,18,82,16],[64,19,82,17],[64,24,82,22],[64,25,82,23],[65,6,83,4],[65,7,83,5],[65,8,83,6],[67,6,85,4],[68,6,86,4],[68,10,86,8,"notificationListener"],[68,30,86,33],[69,6,87,4],[69,10,87,8,"responseListener"],[69,26,87,29],[70,6,89,4],[70,10,89,8,"Platform"],[70,18,89,16],[70,19,89,16,"default"],[70,26,89,16],[70,27,89,17,"OS"],[70,29,89,19],[70,34,89,24],[70,39,89,29],[70,41,89,31],[71,8,90,6,"notificationListener"],[71,28,90,26],[71,31,90,29],[71,35,90,29,"addNotificationReceivedListener"],[71,57,90,60],[71,58,90,60,"addNotificationReceivedListener"],[71,89,90,60],[71,91,90,61,"notification"],[71,103,90,73],[71,107,90,77],[72,10,91,8,"console"],[72,17,91,15],[72,18,91,16,"log"],[72,21,91,19],[72,22,91,20],[72,40,91,38],[72,42,91,40,"notification"],[72,54,91,52],[72,55,91,53],[73,8,92,6],[73,9,92,7],[73,10,92,8],[74,8,94,6,"responseListener"],[74,24,94,22],[74,27,94,25],[74,31,94,25,"addNotificationResponseReceivedListener"],[74,53,94,64],[74,54,94,64,"addNotificationResponseReceivedListener"],[74,93,94,64],[74,95,94,65,"response"],[74,103,94,73],[74,107,94,77],[75,10,95,8,"console"],[75,17,95,15],[75,18,95,16,"log"],[75,21,95,19],[75,22,95,20],[75,43,95,41],[75,45,95,43,"response"],[75,53,95,51],[75,54,95,52],[76,10,96,8],[77,10,97,8],[78,8,98,6],[78,9,98,7],[78,10,98,8],[79,6,99,4],[80,6,101,4],[80,13,101,11],[80,19,101,17],[81,8,102,6,"unsubscribe"],[81,19,102,17],[81,20,102,18],[81,21,102,19],[82,8,103,6],[82,12,103,10,"notificationListener"],[82,32,103,30],[82,34,103,32,"notificationListener"],[82,54,103,52],[82,55,103,53,"remove"],[82,61,103,59],[82,62,103,60],[82,63,103,61],[83,8,104,6],[83,12,104,10,"responseListener"],[83,28,104,26],[83,30,104,28,"responseListener"],[83,46,104,44],[83,47,104,45,"remove"],[83,53,104,51],[83,54,104,52],[83,55,104,53],[84,6,105,4],[84,7,105,5],[85,4,106,2],[85,5,106,3],[85,7,106,5],[85,9,106,7],[85,10,106,8],[86,4,108,2],[86,10,108,8,"signIn"],[86,16,108,14],[86,19,108,17],[86,25,108,17,"signIn"],[86,26,108,24,"email"],[86,31,108,37],[86,33,108,39,"password"],[86,41,108,55],[86,46,108,60],[87,6,109,4],[87,12,109,10],[87,16,109,10,"signInWithEmailAndPassword"],[87,29,109,36],[87,30,109,36,"signInWithEmailAndPassword"],[87,56,109,36],[87,58,109,37,"auth"],[87,73,109,41],[87,74,109,41,"auth"],[87,78,109,41],[87,80,109,43,"email"],[87,85,109,48],[87,87,109,50,"password"],[87,95,109,58],[87,96,109,59],[88,4,110,2],[88,5,110,3],[89,4,112,2],[89,10,112,8,"signUp"],[89,16,112,14],[89,19,112,17],[89,25,112,17,"signUp"],[89,26,112,24,"email"],[89,31,112,37],[89,33,112,39,"password"],[89,41,112,55],[89,46,112,60],[90,6,113,4],[90,12,113,10],[90,16,113,10,"createUserWithEmailAndPassword"],[90,29,113,40],[90,30,113,40,"createUserWithEmailAndPassword"],[90,60,113,40],[90,62,113,41,"auth"],[90,77,113,45],[90,78,113,45,"auth"],[90,82,113,45],[90,84,113,47,"email"],[90,89,113,52],[90,91,113,54,"password"],[90,99,113,62],[90,100,113,63],[91,4,114,2],[91,5,114,3],[92,4,116,2],[92,10,116,8,"signOut"],[92,17,116,15],[92,20,116,18],[92,26,116,18,"signOut"],[92,27,116,18],[92,32,116,30],[93,6,117,4],[93,12,117,10],[93,16,117,10,"firebaseSignOut"],[93,29,117,25],[93,30,117,25,"signOut"],[93,37,117,25],[93,39,117,26,"auth"],[93,54,117,30],[93,55,117,30,"auth"],[93,59,117,30],[93,60,117,31],[94,6,118,4,"setUserProfile"],[94,20,118,18],[94,21,118,19],[94,25,118,23],[94,26,118,24],[95,4,119,2],[95,5,119,3],[96,4,121,2],[96,10,121,8,"registerProfile"],[96,25,121,23],[96,28,121,26],[96,34,121,33,"data"],[96,38,121,42],[96,42,121,47],[97,6,122,4],[97,12,122,10,"response"],[97,20,122,18],[97,23,122,21],[97,29,122,27,"api"],[97,32,122,30],[97,33,122,30,"default"],[97,40,122,30],[97,41,122,31,"post"],[97,45,122,35],[97,46,122,36],[97,66,122,56],[97,68,122,58,"data"],[97,72,122,62],[97,73,122,63],[98,6,123,4,"setUserProfile"],[98,20,123,18],[98,21,123,19,"response"],[98,29,123,27],[98,30,123,28,"data"],[98,34,123,32],[98,35,123,33],[99,4,124,2],[99,5,124,3],[100,4,126,2],[100,10,126,8,"refreshProfile"],[100,24,126,22],[100,27,126,25],[100,33,126,25,"refreshProfile"],[100,34,126,25],[100,39,126,37],[101,6,127,4],[101,10,127,8,"user"],[101,14,127,12],[101,16,127,14],[102,8,128,6],[102,14,128,12,"response"],[102,22,128,20],[102,25,128,23],[102,31,128,29,"api"],[102,34,128,32],[102,35,128,32,"default"],[102,42,128,32],[102,43,128,33,"get"],[102,46,128,36],[102,47,128,37],[102,66,128,56],[102,67,128,57],[103,8,129,6,"setUserProfile"],[103,22,129,20],[103,23,129,21,"response"],[103,31,129,29],[103,32,129,30,"data"],[103,36,129,34],[103,37,129,35],[104,6,130,4],[105,4,131,2],[105,5,131,3],[106,4,133,2],[106,24,134,4],[106,28,134,4,"_reactJsxDevRuntime"],[106,47,134,4],[106,48,134,4,"jsxDEV"],[106,54,134,4],[106,56,134,5,"AuthContext"],[106,67,134,16],[106,68,134,17,"Provider"],[106,76,134,25],[107,6,134,26,"value"],[107,11,134,31],[107,13,134,33],[108,8,135,6,"user"],[108,12,135,10],[109,8,136,6,"userProfile"],[109,19,136,17],[110,8,137,6,"loading"],[110,15,137,13],[111,8,138,6,"signIn"],[111,14,138,12],[112,8,139,6,"signUp"],[112,14,139,12],[113,8,140,6,"signOut"],[113,15,140,13],[114,8,141,6,"registerProfile"],[114,23,141,21],[115,8,142,6,"refreshProfile"],[116,6,143,4],[116,7,143,6],[117,6,143,6,"children"],[117,14,143,6],[117,16,144,7,"children"],[118,4,144,15],[119,6,144,15,"fileName"],[119,14,144,15],[119,16,144,15,"_jsxFileName"],[119,28,144,15],[120,6,144,15,"lineNumber"],[120,16,144,15],[121,6,144,15,"columnNumber"],[121,18,144,15],[122,4,144,15],[122,11,145,26],[122,12,145,27],[123,2,147,0],[124,2,149,7],[124,11,149,16,"useAuth"],[124,18,149,23,"useAuth"],[124,19,149,23],[124,21,149,26],[125,4,150,2],[125,10,150,8,"context"],[125,17,150,15],[125,20,150,18],[125,24,150,18,"useContext"],[125,30,150,28],[125,31,150,28,"useContext"],[125,41,150,28],[125,43,150,29,"AuthContext"],[125,54,150,40],[125,55,150,41],[126,4,151,2],[126,8,151,6,"context"],[126,15,151,13],[126,20,151,18,"undefined"],[126,29,151,27],[126,31,151,29],[127,6,152,4],[127,12,152,10],[127,16,152,14,"Error"],[127,21,152,19],[127,22,152,20],[127,67,152,65],[127,68,152,66],[128,4,153,2],[129,4,154,2],[129,11,154,9,"context"],[129,18,154,16],[130,2,155,0],[131,0,155,1],[131,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","onAuthStateChanged$argument_1","addNotificationReceivedListener$argument_0","addNotificationResponseReceivedListener$argument_0","<anonymous>","signIn","signUp","signOut","registerProfile","refreshProfile","useAuth"],"mappings":"AAA;OC6C;YCK;iDCC;KD+B;6DEO;OFE;iEGE;OHI;WIG;KJI;GDC;iBME;GNE;iBOE;GPE;kBQE;GRG;0BSE;GTG;yBUE;GVK;CDgB;OYE;CZM"},"hasCjsExports":false},"type":"js/module"}]}